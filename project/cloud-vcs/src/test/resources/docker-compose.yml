version: '3'
services:
  gitlab:
    build: gitlab
    ports:
    - "18083:18083"
    - "18322:18322"
    environment:
      GITLAB_OMNIBUS_CONFIG: |
        external_url "http://#{host}/gitlab"
        nginx['listen_port'] = 18083
        gitlab_rails['gitlab_shell_ssh_port'] = 18322
      #Requirement for GITLAB_ROOT_PASSWORD characters number >= 8
      GITLAB_ROOT_PASSWORD: rootpassword
    container_name: "javacloud-gitlab-test"
